<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script src="https://cdn.jsdelivr.net/npm/vue@2.6.12/dist/vue.js"></script>
</head>
<body>
  <div id="app">  
    <div 
    v-for="card in cards" 
    v-on:click="cardClicker(card, $event)" 
    :class="{ active: card.isActive }"
    class="card hide" 
    >
      <img class="card" v-bind:src="card.src" alt="">
    </div>
    <div 
    v-for="card in cards" 
    v-on:click="cardClicker(card, $event)" 
    :class="{ active: card.isActive }"
    class="card hide" 
    >
      <img class="card" v-bind:src="card.src" alt="">
    </div>
    <button v-if="isWinner">Play again</button>
  </div>
  <script>
    new Vue({
      el: '#app',
      data() {
        return {
          id: 0,
          limit: 6,
          cards: [
            { 
              name: 'bull', 
              src: './img/bull.svg',
              isActive: false,
            },
            { 
              name: 'butterfly', 
              src: './img/butterfly.svg',
              isActive: false, 
            },
            { 
              name: 'cat', 
              src: './img/cat.svg',
              isActive: false, 
            },
            { 
              name: 'crab', 
              src: './img/crab.svg',
              isActive: false,
             },
            { 
              name: 'lion', 
              src: './img/lion.svg',
              isActive: false, 
            },
            { 
              name: 'monkey', 
              src: './img/monkey.svg',
              isActive: false,
             },
            { 
              name: 'polar-bear', 
              src: './img/polar-bear.svg',
              isActive: false,
            },
            { 
              name: 'scorpion', 
              src: './img/scorpion.svg',
              isActive: false, 
            },
            { 
              name: 'snake', 
              src: './img/snake.svg',
              isActive: false,
             },
            { 
              name: 'turtle', 
              src: './img/turtle.svg',
              isActive: false,
            },
            { 
              name: 'wolf-head', 
              src: './img/wolf-head.svg',
              isActive: false, 
            },
          ],
          last: null,
          current: null,
        }
      },
      computed: {
        passed() { 
          return this.cards.filter(card => !!card.isActive) 
        },
        isWinner() {
          return this.cards.length === this.passed.length
        },
      },
      mounted() {
        let {limit, cards} = this
        cards.splice(0, --limit)
        const DOMcards = document.querySelectorAll('div.card')
        DOMcards.forEach((element, index) => element.id = `card_${index}`);
      },
      methods: {
        cardClicker(val, event) {
          // let {last, current} = this
          let target = event.currentTarget
          if (!!this.current && this.current.id === target.id) return 
          target.classList.toggle("hide")
          this.last = this.current
          this.current = {
            id: target.id,
            name: val.name,
          }
          if (!!this.last && this.last.name === this.current.name) {
            this.cards.find(card => card.name === this.current.name).isActive = true
            this.current = null
            this.last = null
          } else if (!!this.last) {
            const buffer = { 
              current: this.current, 
              last: this.last
            }
            setTimeout(() => {
              document.getElementById(buffer.last.id).classList.add("hide")
              document.getElementById(buffer.current.id).classList.add("hide")
            }, 500)
            this.current = null
            this.last = null
          }
        },
      }
    })
  </script>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      min-height: 100vh;
    }
    #app {
      position: relative;

      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: center;
      align-content: center;
      gap: 1.5rem;

      height: 100vh; 
      margin: auto;
    }
    .card {
      background: #000000;
    }
    .card {
      display: block;
      position: relative;
      width: calc(100vw / 5);
      transition: transform 0.5s linear;
      -webkit-transform-style: preserve-3d;
      transform-style: preserve-3d;
      transform: rotateY(0deg);
    }
    .card.hide:not(.active) {
      transform: rotateY(180deg);
    }
    .card.active {
      transform: rotateY(0deg);
      opacity: 0.8;
    }
    img{
      -webkit-backface-visibility: hidden;
      backface-visibility: hidden;
    }
  </style>
</body>
</html>